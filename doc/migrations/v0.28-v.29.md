<!--Specify versions for migration below-->
# Migrating to libp2p@__

A migration guide for refactoring your application code from libp2p v0.28.x to v0.29.0.

## Table of Contents

- [API](#api)
  - [Pubsub](#pubsub)
  - [Uint8Arrays replace node Buffers](#uint8arrays-replace-node-buffers)
- [Module Updates](#module-updates)

## API

### Pubsub

The [`libp2p-gossipsub`](https://github.com/ChainSafe/js-libp2p-gossipsub) javascript implementation is now upgraded according to the Gossipsub v1.1 [spec](https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md) and it packs several security hardening extensions. You can read more about it in its [blogpost](https://blog.ipfs.io/2020-05-20-gossipsub-v1.1/).

We leveraged this update to rethink the pubsub interface, in order to make it easier, as well as to be consistent with the API of the routers. Moreover, the interface was also reconstructed to ease new pubsub router implementations.

#### Access router instance

Libp2p prior to 0.29 was abstracting the router API without any real value. We now expose the pubsub router API directly and have a test suite in the [interface-pubsub](todo-link) to guarantee routers compliance.

**Before**

```js
libp2p.pubsub._pubsub.*
```

**After**

```js
libp2p.pubsub.*
```

#### Publish


#### Subscribe



#### Unsubscribe



### Uint8Arrays replace node Buffers

Aiming to improve libp2p browser support, we are moving away from node core modules unless we can guarantee that the code we are writing will not run in a browser. It is worth to mention that modern JavaScript runtimes have TypedArrays such as Uint8Array backed by ArrayBuffers.



## Module Updates

With this release you should update the following libp2p modules if you are relying on them:

<!--Specify module versions in JSON for migration below.
It's recommended to check package.json changes for this: 
`git diff <release> <prev> -- package.json`
-->

```json

```
